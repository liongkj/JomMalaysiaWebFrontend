<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script>cloudinary.setCloudName("jomn9-com");

function uploadImageWidget(folder, imageType, uploadMultiple){
        let field = imageType;
        let isLogo = field.indexOf("logo")>=0 ;       
        cloudinary.openUploadWidget(
            {
                cloudName: 'jomn9-com',
                uploadPreset: 'ox3azzqe',
                apiKey: '731121621859821',
                folder: folder,
                sources: ["local", "image_search"],
                googleApiKey: 'AIzaSyCZseAlp_Rd9CxaJtOQBVKvpkBl8gHiXvk',
                searchBySites: ["all", "unsplash.com", "freepik.com"],
                croppingAspectRatio: isLogo?1:null,
                cropping: "server",
                croppingShowDimensions:true,
                croppingShowBackButton:true,
                resourceType: ["image"],
                clientAllowedFormats: ["png", "jpg", "jpeg"],
                minImageWidth: 100,
                minImageHeight: 100,
                autoMinimize: true,
                showSkipCropButton: true,
                thumbnailTransformation : "w_200,ar_1:1,c_fill,g_auto,e_art:hokusai"
            }, (error, result) => {
                if(result.event === "upload-added"){
                   setLoading(true);
                }
                if (!error && result && result.event === "success") {
                    setLoading(false);
                    debugger 
                    $(".imageUrl."+ field).val(result.info.secure_url);
                    $(".img-thumbnail."+field).attr("src",result.info.thumbnail_url);
                    $(".imageName."+ field).val(result.info.original_filename + "." + result.info.format);
                }
            }
        )
}
        
   function setLoading(loading){
        let submitButton = $(".submitButton"); 
        let backButton = $(".cancelButton");
        
         submitButton.attr("disabled",loading);
         backButton.attr("disabled",loading);
   }

</script>

